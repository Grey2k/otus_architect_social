{"remainingRequest":"/Users/vvdudov/projects/edu/otus/arch/social/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/vvdudov/projects/edu/otus/arch/social/front/src/views/Friends.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/vvdudov/projects/edu/otus/arch/social/front/src/views/Friends.vue","mtime":1602010327882},{"path":"/Users/vvdudov/projects/edu/otus/arch/social/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/vvdudov/projects/edu/otus/arch/social/front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/vvdudov/projects/edu/otus/arch/social/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/vvdudov/projects/edu/otus/arch/social/front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KCmltcG9ydCBVc2VyU2VydmljZSBmcm9tICIuLi9zZXJ2aWNlcy91c2VyLnNlcnZpY2UiOwoKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJGcmllbmRzIiwKICBkYXRhOiAoKSA9PiAoewogICAgaXRlbXM6IFtdLAogICAgbG9hZGluZzogZmFsc2UsCiAgICBtZXNzYWdlOiAiIiwKICB9KSwKICBjb21wdXRlZDogewogICAgY3VycmVudFVzZXIoKSB7CiAgICAgIHJldHVybiB0aGlzLiRzdG9yZS5zdGF0ZS5hdXRoLnVzZXI7CiAgICB9LAogIH0sCiAgY3JlYXRlZCgpIHsKICAgIFVzZXJTZXJ2aWNlLmdldEZyaWVuZExpc3QoKS50aGVuKAogICAgICAocmVzcG9uc2UpID0+IHsKICAgICAgICB0aGlzLml0ZW1zID0gcmVzcG9uc2UuZGF0YTsKICAgICAgfSwKICAgICAgKGVycm9yKSA9PiB7CiAgICAgICAgdGhpcy5jb250ZW50ID0KICAgICAgICAgIChlcnJvci5yZXNwb25zZSAmJiBlcnJvci5yZXNwb25zZS5kYXRhKSB8fAogICAgICAgICAgZXJyb3IubWVzc2FnZSB8fAogICAgICAgICAgZXJyb3IuZXJyb3IudG9TdHJpbmcoKTsKICAgICAgfQogICAgKTsKICB9LAogIG1ldGhvZHM6IHsKICAgIHJlbW92ZUZyaWVuZDogZnVuY3Rpb24gKGlkKSB7CiAgICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICAgIFVzZXJTZXJ2aWNlLnJlbW92ZUZyaWVuZChpZCkudGhlbigKICAgICAgICAoKSA9PiB7CiAgICAgICAgICB0aGlzLmxvYWRpbmcgPSBmYWxzZTsKICAgICAgICAgIGxvY2F0aW9uLnJlbG9hZCgpCiAgICAgICAgICAvL3RoaXMucHJvZmlsZSA9IHJlc3BvbnNlLmRhdGE7CiAgICAgICAgfSwKICAgICAgICAoZXJyb3IpID0+IHsKICAgICAgICAgIHRoaXMubWVzc2FnZSA9CiAgICAgICAgICAgIChlcnJvci5yZXNwb25zZSAmJiBlcnJvci5yZXNwb25zZS5kYXRhKTsKICAgICAgICAgICAgdGhpcy5sb2FkaW5nID0gZmFsc2U7CiAgICAgICAgfQogICAgICApOwogICAgfQogIH0KfTsK"},{"version":3,"sources":["Friends.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;AAwBA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Friends.vue","sourceRoot":"src/views","sourcesContent":["<template>\n  <div class=\"container\">\n    <h3>My friends</h3>\n    <div class=\"card mb-3\" v-for=\"item in items\" v-bind:key=\"item.id\">\n        <div class=\"card-body\">\n            <h5 class=\"card-title\">{{ item.first_name }} {{ item.last_name }}</h5>\n            <p class=\"card-text\">Email: {{ item.email }}</p>\n            <template v-if=\"currentUser.id != item.id\">\n                <button class=\"btn btn-primary btn-block\" :disabled=\"loading\" v-on:click=\"removeFriend(item.id)\">\n                    <span v-show=\"loading\" class=\"spinner-border spinner-border-sm\"></span>\n                    Remove from friends\n                </button>\n            </template>\n        </div>\n    </div>\n    <div class=\"form-group\">\n        <div v-if=\"message\" class=\"alert alert-danger\" role=\"alert\">\n            {{ message }}\n        </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport UserService from \"../services/user.service\";\n\nexport default {\n  name: \"Friends\",\n  data: () => ({\n    items: [],\n    loading: false,\n    message: \"\",\n  }),\n  computed: {\n    currentUser() {\n      return this.$store.state.auth.user;\n    },\n  },\n  created() {\n    UserService.getFriendList().then(\n      (response) => {\n        this.items = response.data;\n      },\n      (error) => {\n        this.content =\n          (error.response && error.response.data) ||\n          error.message ||\n          error.error.toString();\n      }\n    );\n  },\n  methods: {\n    removeFriend: function (id) {\n      this.loading = true;\n      UserService.removeFriend(id).then(\n        () => {\n          this.loading = false;\n          location.reload()\n          //this.profile = response.data;\n        },\n        (error) => {\n          this.message =\n            (error.response && error.response.data);\n            this.loading = false;\n        }\n      );\n    }\n  }\n};\n</script>\n"]}]}