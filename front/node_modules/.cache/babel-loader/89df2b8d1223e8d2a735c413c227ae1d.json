{"remainingRequest":"/Users/vvdudov/projects/edu/otus/arch/social/front/node_modules/babel-loader/lib/index.js!/Users/vvdudov/projects/edu/otus/arch/social/front/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/vvdudov/projects/edu/otus/arch/social/front/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/vvdudov/projects/edu/otus/arch/social/front/src/views/User.vue?vue&type=script&lang=js&","dependencies":[{"path":"/Users/vvdudov/projects/edu/otus/arch/social/front/src/views/User.vue","mtime":1602262355396},{"path":"/Users/vvdudov/projects/edu/otus/arch/social/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/vvdudov/projects/edu/otus/arch/social/front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/vvdudov/projects/edu/otus/arch/social/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/vvdudov/projects/edu/otus/arch/social/front/node_modules/vue-loader/lib/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLnJlZ2V4cC50by1zdHJpbmciOwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwovLwppbXBvcnQgVXNlclNlcnZpY2UgZnJvbSAiLi4vc2VydmljZXMvdXNlci5zZXJ2aWNlIjsKZXhwb3J0IGRlZmF1bHQgewogIG5hbWU6ICJVc2VyIiwKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgcHJvZmlsZTogW10sCiAgICAgIGxvYWRpbmc6IGZhbHNlLAogICAgICBzZW50OiBmYWxzZSwKICAgICAgc3VjY2VzczogZmFsc2UsCiAgICAgIG1lc3NhZ2U6ICIiCiAgICB9OwogIH0sCiAgY29tcHV0ZWQ6IHsKICAgIGN1cnJlbnRVc2VyOiBmdW5jdGlvbiBjdXJyZW50VXNlcigpIHsKICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmF1dGgudXNlcjsKICAgIH0KICB9LAogIGNyZWF0ZWQ6IGZ1bmN0aW9uIGNyZWF0ZWQoKSB7CiAgICB2YXIgX3RoaXMgPSB0aGlzOwoKICAgIHRoaXMubG9hZGluZyA9IHRydWU7CiAgICBVc2VyU2VydmljZS5nZXRQdWJsaWNQcm9maWxlQnlJZCh0aGlzLiRyb3V0ZS5wYXJhbXMudXNlcklkKS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICBfdGhpcy5wcm9maWxlID0gcmVzcG9uc2UuZGF0YTsKICAgICAgX3RoaXMubG9hZGluZyA9IGZhbHNlOwogICAgfSwgZnVuY3Rpb24gKGVycm9yKSB7CiAgICAgIF90aGlzLm1lc3NhZ2UgPSBlcnJvci5yZXNwb25zZSAmJiBlcnJvci5yZXNwb25zZS5kYXRhIHx8IGVycm9yLm1lc3NhZ2UgfHwgZXJyb3IuZXJyb3IudG9TdHJpbmcoKTsKICAgICAgX3RoaXMubG9hZGluZyA9IGZhbHNlOwogICAgfSk7CiAgfSwKICBtZXRob2RzOiB7CiAgICBhZGRUb0ZyaWVuZHM6IGZ1bmN0aW9uIGFkZFRvRnJpZW5kcygpIHsKICAgICAgdmFyIF90aGlzMiA9IHRoaXM7CgogICAgICB0aGlzLmxvYWRpbmcgPSB0cnVlOwogICAgICBVc2VyU2VydmljZS5hZGRGcmllbmQodGhpcy5wcm9maWxlLmlkKS50aGVuKGZ1bmN0aW9uICgpIHsKICAgICAgICBfdGhpczIubG9hZGluZyA9IGZhbHNlOwogICAgICAgIF90aGlzMi5zdWNjZXNzID0gdHJ1ZTsKICAgICAgICBfdGhpczIuc2VudCA9IHRydWU7CiAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikgewogICAgICAgIF90aGlzMi5tZXNzYWdlID0gZXJyb3IucmVzcG9uc2UgJiYgZXJyb3IucmVzcG9uc2UuZGF0YS5lcnJvcjsKICAgICAgICBfdGhpczIubG9hZGluZyA9IGZhbHNlOwogICAgICB9KTsKICAgIH0sCiAgICBkaXNwbGF5RGF0ZTogZnVuY3Rpb24gZGlzcGxheURhdGUoZGF0ZSkgewogICAgICBkID0gbmV3IERhdGUoZGF0ZSk7CiAgICAgIHJldHVybiBkLmdldERhdGUoKSArICcuJyArIGQuZ2V0TW9udGgoKSArICcuJyArIGQuZ2V0RnVsbFllYXIoKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["User.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6BA,OAAA,WAAA,MAAA,0BAAA;AAEA,eAAA;AACA,EAAA,IAAA,EAAA,MADA;AAEA,EAAA,IAAA,EAAA;AAAA,WAAA;AACA,MAAA,OAAA,EAAA,EADA;AAEA,MAAA,OAAA,EAAA,KAFA;AAGA,MAAA,IAAA,EAAA,KAHA;AAIA,MAAA,OAAA,EAAA,KAJA;AAKA,MAAA,OAAA,EAAA;AALA,KAAA;AAAA,GAFA;AAUA,EAAA,QAAA,EAAA;AACA,IAAA,WADA,yBACA;AACA,aAAA,KAAA,MAAA,CAAA,KAAA,CAAA,IAAA,CAAA,IAAA;AACA;AAHA,GAVA;AAeA,EAAA,OAfA,qBAeA;AAAA;;AACA,SAAA,OAAA,GAAA,IAAA;AACA,IAAA,WAAA,CAAA,oBAAA,CAAA,KAAA,MAAA,CAAA,MAAA,CAAA,MAAA,EAAA,IAAA,CACA,UAAA,QAAA,EAAA;AACA,MAAA,KAAA,CAAA,OAAA,GAAA,QAAA,CAAA,IAAA;AACA,MAAA,KAAA,CAAA,OAAA,GAAA,KAAA;AACA,KAJA,EAKA,UAAA,KAAA,EAAA;AACA,MAAA,KAAA,CAAA,OAAA,GACA,KAAA,CAAA,QAAA,IAAA,KAAA,CAAA,QAAA,CAAA,IAAA,IACA,KAAA,CAAA,OADA,IAEA,KAAA,CAAA,KAAA,CAAA,QAAA,EAHA;AAIA,MAAA,KAAA,CAAA,OAAA,GAAA,KAAA;AACA,KAXA;AAaA,GA9BA;AA+BA,EAAA,OAAA,EAAA;AACA,IAAA,YAAA,EAAA,wBAAA;AAAA;;AACA,WAAA,OAAA,GAAA,IAAA;AACA,MAAA,WAAA,CAAA,SAAA,CAAA,KAAA,OAAA,CAAA,EAAA,EAAA,IAAA,CACA,YAAA;AACA,QAAA,MAAA,CAAA,OAAA,GAAA,KAAA;AACA,QAAA,MAAA,CAAA,OAAA,GAAA,IAAA;AACA,QAAA,MAAA,CAAA,IAAA,GAAA,IAAA;AACA,OALA,EAMA,UAAA,KAAA,EAAA;AACA,QAAA,MAAA,CAAA,OAAA,GACA,KAAA,CAAA,QAAA,IAAA,KAAA,CAAA,QAAA,CAAA,IAAA,CAAA,KADA;AAEA,QAAA,MAAA,CAAA,OAAA,GAAA,KAAA;AACA,OAVA;AAYA,KAfA;AAgBA,IAAA,WAAA,EAAA,qBAAA,IAAA,EAAA;AACA,MAAA,CAAA,GAAA,IAAA,IAAA,CAAA,IAAA,CAAA;AACA,aAAA,CAAA,CAAA,OAAA,KAAA,GAAA,GAAA,CAAA,CAAA,QAAA,EAAA,GAAA,GAAA,GAAA,CAAA,CAAA,WAAA,EAAA;AACA;AAnBA;AA/BA,CAAA","sourcesContent":["<template>\n  <div class=\"container\">\n    <h3>Profile</h3>\n    <ul class=\"list-group list-group-flush\">\n      <li class=\"list-group-item\"><strong>Email:</strong> {{ profile.email}}</li>\n      <li class=\"list-group-item\"><strong>First name:</strong> {{ profile.first_name}}</li>\n      <li class=\"list-group-item\"><strong>Last name:</strong> {{ profile.last_name}}</li>\n      <li class=\"list-group-item\"><strong>Sex:</strong> {{ profile.sex}}</li>\n      <li class=\"list-group-item\"><strong>Interest:</strong> {{ profile.interest}}</li>\n      <li class=\"list-group-item\"><strong>City:</strong> {{ profile.city}}</li>\n    </ul>\n    <div class=\"form-group\">\n      <div v-if=\"message\" class=\"alert alert-danger\" role=\"alert\">\n        {{ message }}\n      </div>\n      <div v-if=\"success\" class=\"alert alert-success\" role=\"alert\">\n        Success!\n      </div>\n    </div>\n    <template v-if=\"currentUser && currentUser.id != profile.id\">\n      <button class=\"btn btn-primary btn-block\" :disabled=\"sent\" v-on:click=\"addToFriends\">\n        <span v-show=\"loading\" class=\"spinner-border spinner-border-sm\"></span>\n        Add to friends\n      </button>\n    </template>\n  </div>\n</template>\n\n<script>\nimport UserService from \"../services/user.service\";\n\nexport default {\n  name: \"User\",\n  data: () => ({\n    profile: [],\n    loading: false,\n    sent: false,\n    success: false,\n    message: \"\",\n  }),\n\n  computed: {\n    currentUser() {\n      return this.$store.state.auth.user;\n    },\n  },\n  created() {\n    this.loading = true;\n    UserService.getPublicProfileById(this.$route.params.userId).then(\n      (response) => {\n        this.profile = response.data;\n        this.loading = false;\n      },\n      (error) => {\n        this.message =\n          (error.response && error.response.data) ||\n          error.message ||\n          error.error.toString();\n          this.loading = false;\n      }\n    );\n  },\n  methods: {\n    addToFriends: function () {\n      this.loading = true;\n      UserService.addFriend(this.profile.id).then(\n        () => {\n          this.loading = false;\n          this.success = true;\n          this.sent = true;\n        },\n        (error) => {\n          this.message =\n            (error.response && error.response.data.error);\n            this.loading = false;\n        }\n      );\n    },\n    displayDate: function(date) {\n      d = new Date(date)\n      return d.getDate()+'.'+ d.getMonth()+'.'+ d.getFullYear()\n    }\n  }\n};\n</script>"],"sourceRoot":"src/views"}]}