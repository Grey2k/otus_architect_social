{"remainingRequest":"/Users/vvdudov/projects/edu/otus/arch/social/front/node_modules/babel-loader/lib/index.js!/Users/vvdudov/projects/edu/otus/arch/social/front/node_modules/eslint-loader/index.js??ref--13-0!/Users/vvdudov/projects/edu/otus/arch/social/front/src/services/auth.service.js","dependencies":[{"path":"/Users/vvdudov/projects/edu/otus/arch/social/front/src/services/auth.service.js","mtime":1602265011804},{"path":"/Users/vvdudov/projects/edu/otus/arch/social/front/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/vvdudov/projects/edu/otus/arch/social/front/node_modules/babel-loader/lib/index.js","mtime":499162500000},{"path":"/Users/vvdudov/projects/edu/otus/arch/social/front/node_modules/eslint-loader/index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9jbGFzc0NhbGxDaGVjayBmcm9tICIvVXNlcnMvdnZkdWRvdi9wcm9qZWN0cy9lZHUvb3R1cy9hcmNoL3NvY2lhbC9mcm9udC9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vY2xhc3NDYWxsQ2hlY2siOwppbXBvcnQgX2NyZWF0ZUNsYXNzIGZyb20gIi9Vc2Vycy92dmR1ZG92L3Byb2plY3RzL2VkdS9vdHVzL2FyY2gvc29jaWFsL2Zyb250L25vZGVfbW9kdWxlcy9AYmFiZWwvcnVudGltZS9oZWxwZXJzL2VzbS9jcmVhdGVDbGFzcyI7CmltcG9ydCBheGlvcyBmcm9tICdheGlvcyc7CnZhciBBUElfVVJMID0gcHJvY2Vzcy5lbnYuVlVFX0FQUF9IVFRQX1NFUlZFUl9VUkw7Cgp2YXIgQXV0aFNlcnZpY2UgPSAvKiNfX1BVUkVfXyovZnVuY3Rpb24gKCkgewogIGZ1bmN0aW9uIEF1dGhTZXJ2aWNlKCkgewogICAgX2NsYXNzQ2FsbENoZWNrKHRoaXMsIEF1dGhTZXJ2aWNlKTsKICB9CgogIF9jcmVhdGVDbGFzcyhBdXRoU2VydmljZSwgW3sKICAgIGtleTogImxvZ2luIiwKICAgIHZhbHVlOiBmdW5jdGlvbiBsb2dpbih1c2VyKSB7CiAgICAgIHJldHVybiBheGlvcy5wb3N0KEFQSV9VUkwgKyAnbG9naW4nLCB7CiAgICAgICAgZW1haWw6IHVzZXIuZW1haWwsCiAgICAgICAgcGFzc3dvcmQ6IHVzZXIucGFzc3dvcmQKICAgICAgfSkudGhlbihmdW5jdGlvbiAocmVzcG9uc2UpIHsKICAgICAgICBpZiAocmVzcG9uc2UuZGF0YS5hY2Nlc3NfdG9rZW4pIHsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCd1c2VyJywgSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UuZGF0YS51c2VyKSk7CiAgICAgICAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbSgnYWNjZXNzX3Rva2VuJywgSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UuZGF0YS5hY2Nlc3NfdG9rZW4pKTsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdyZWZyZXNoX3Rva2VuJywgSlNPTi5zdHJpbmdpZnkocmVzcG9uc2UuZGF0YS5yZWZyZXNoX3Rva2VuKSk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gcmVzcG9uc2UuZGF0YTsKICAgICAgfSk7CiAgICB9CiAgfSwgewogICAga2V5OiAibG9nb3V0IiwKICAgIHZhbHVlOiBmdW5jdGlvbiBsb2dvdXQoKSB7CiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCd1c2VyJyk7CiAgICAgIGxvY2FsU3RvcmFnZS5yZW1vdmVJdGVtKCdhY2Nlc3NfdG9rZW4nKTsKICAgICAgbG9jYWxTdG9yYWdlLnJlbW92ZUl0ZW0oJ3JlZnJlc2hfdG9rZW4nKTsKICAgIH0KICB9LCB7CiAgICBrZXk6ICJyZWdpc3RlciIsCiAgICB2YWx1ZTogZnVuY3Rpb24gcmVnaXN0ZXIodXNlcikgewogICAgICByZXR1cm4gYXhpb3MucG9zdChBUElfVVJMICsgJ3JlZ2lzdGVyJywgewogICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLAogICAgICAgIHBhc3N3b3JkOiB1c2VyLnBhc3N3b3JkLAogICAgICAgIGZpcnN0X25hbWU6IHVzZXIuZmlyc3RfbmFtZSwKICAgICAgICBsYXN0X25hbWU6IHVzZXIubGFzdF9uYW1lLAogICAgICAgIGJpcnRoX2RhdGU6IHVzZXIuYmlydGhfZGF0ZSwKICAgICAgICBzZXg6IHVzZXIuc2V4LAogICAgICAgIGludGVyZXN0OiB1c2VyLmludGVyZXN0LAogICAgICAgIGNpdHk6IHVzZXIuY2l0eQogICAgICB9KS50aGVuKGZ1bmN0aW9uIChyZXNwb25zZSkgewogICAgICAgIGlmIChyZXNwb25zZS5kYXRhLmFjY2Vzc190b2tlbikgewogICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3VzZXInLCBKU09OLnN0cmluZ2lmeShyZXNwb25zZS5kYXRhLnVzZXIpKTsKICAgICAgICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKCdhY2Nlc3NfdG9rZW4nLCBKU09OLnN0cmluZ2lmeShyZXNwb25zZS5kYXRhLmFjY2Vzc190b2tlbikpOwogICAgICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oJ3JlZnJlc2hfdG9rZW4nLCBKU09OLnN0cmluZ2lmeShyZXNwb25zZS5kYXRhLnJlZnJlc2hfdG9rZW4pKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiByZXNwb25zZS5kYXRhOwogICAgICB9KTsKICAgIH0KICB9XSk7CgogIHJldHVybiBBdXRoU2VydmljZTsKfSgpOwoKZXhwb3J0IGRlZmF1bHQgbmV3IEF1dGhTZXJ2aWNlKCk7"},{"version":3,"sources":["/Users/vvdudov/projects/edu/otus/arch/social/front/src/services/auth.service.js"],"names":["axios","API_URL","process","env","VUE_APP_HTTP_SERVER_URL","AuthService","user","post","email","password","then","response","data","access_token","localStorage","setItem","JSON","stringify","refresh_token","removeItem","first_name","last_name","birth_date","sex","interest","city"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,IAAMC,OAAO,GAAGC,OAAO,CAACC,GAAR,CAAYC,uBAA5B;;IAEMC,W;;;;;;;0BACIC,I,EAAM;AACR,aAAON,KAAK,CACPO,IADE,CACGN,OAAO,GAAG,OADb,EACsB;AACrBO,QAAAA,KAAK,EAAEF,IAAI,CAACE,KADS;AAErBC,QAAAA,QAAQ,EAAEH,IAAI,CAACG;AAFM,OADtB,EAKFC,IALE,CAKG,UAAAC,QAAQ,EAAI;AACd,YAAIA,QAAQ,CAACC,IAAT,CAAcC,YAAlB,EAAgC;AAC5BC,UAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAACC,SAAL,CAAeN,QAAQ,CAACC,IAAT,CAAcN,IAA7B,CAA7B;AACAQ,UAAAA,YAAY,CAACC,OAAb,CAAqB,cAArB,EAAqCC,IAAI,CAACC,SAAL,CAAeN,QAAQ,CAACC,IAAT,CAAcC,YAA7B,CAArC;AACAC,UAAAA,YAAY,CAACC,OAAb,CAAqB,eAArB,EAAsCC,IAAI,CAACC,SAAL,CAAeN,QAAQ,CAACC,IAAT,CAAcM,aAA7B,CAAtC;AACH;;AAED,eAAOP,QAAQ,CAACC,IAAhB;AACH,OAbE,CAAP;AAcH;;;6BAEQ;AACLE,MAAAA,YAAY,CAACK,UAAb,CAAwB,MAAxB;AACAL,MAAAA,YAAY,CAACK,UAAb,CAAwB,cAAxB;AACAL,MAAAA,YAAY,CAACK,UAAb,CAAwB,eAAxB;AACH;;;6BAEQb,I,EAAM;AACX,aAAON,KAAK,CACPO,IADE,CACGN,OAAO,GAAG,UADb,EACyB;AACxBO,QAAAA,KAAK,EAAEF,IAAI,CAACE,KADY;AAExBC,QAAAA,QAAQ,EAAEH,IAAI,CAACG,QAFS;AAGxBW,QAAAA,UAAU,EAAEd,IAAI,CAACc,UAHO;AAIxBC,QAAAA,SAAS,EAAEf,IAAI,CAACe,SAJQ;AAKxBC,QAAAA,UAAU,EAAEhB,IAAI,CAACgB,UALO;AAMxBC,QAAAA,GAAG,EAAEjB,IAAI,CAACiB,GANc;AAOxBC,QAAAA,QAAQ,EAAElB,IAAI,CAACkB,QAPS;AAQxBC,QAAAA,IAAI,EAAEnB,IAAI,CAACmB;AARa,OADzB,EAWFf,IAXE,CAWG,UAAAC,QAAQ,EAAI;AACd,YAAIA,QAAQ,CAACC,IAAT,CAAcC,YAAlB,EAAgC;AAC5BC,UAAAA,YAAY,CAACC,OAAb,CAAqB,MAArB,EAA6BC,IAAI,CAACC,SAAL,CAAeN,QAAQ,CAACC,IAAT,CAAcN,IAA7B,CAA7B;AACAQ,UAAAA,YAAY,CAACC,OAAb,CAAqB,cAArB,EAAqCC,IAAI,CAACC,SAAL,CAAeN,QAAQ,CAACC,IAAT,CAAcC,YAA7B,CAArC;AACAC,UAAAA,YAAY,CAACC,OAAb,CAAqB,eAArB,EAAsCC,IAAI,CAACC,SAAL,CAAeN,QAAQ,CAACC,IAAT,CAAcM,aAA7B,CAAtC;AACH;;AAED,eAAOP,QAAQ,CAACC,IAAhB;AACH,OAnBE,CAAP;AAoBH;;;;;;AAGL,eAAe,IAAIP,WAAJ,EAAf","sourcesContent":["import axios from 'axios';\n\nconst API_URL = process.env.VUE_APP_HTTP_SERVER_URL;\n\nclass AuthService {\n    login(user) {\n        return axios\n            .post(API_URL + 'login', {\n                email: user.email,\n                password: user.password\n            })\n            .then(response => {\n                if (response.data.access_token) {\n                    localStorage.setItem('user', JSON.stringify(response.data.user));\n                    localStorage.setItem('access_token', JSON.stringify(response.data.access_token));\n                    localStorage.setItem('refresh_token', JSON.stringify(response.data.refresh_token));\n                }\n\n                return response.data;\n            });\n    }\n\n    logout() {\n        localStorage.removeItem('user');\n        localStorage.removeItem('access_token');\n        localStorage.removeItem('refresh_token');\n    }\n\n    register(user) {\n        return axios\n            .post(API_URL + 'register', {\n                email: user.email,\n                password: user.password,\n                first_name: user.first_name,\n                last_name: user.last_name,\n                birth_date: user.birth_date,\n                sex: user.sex,\n                interest: user.interest,\n                city: user.city\n            })\n            .then(response => {\n                if (response.data.access_token) {\n                    localStorage.setItem('user', JSON.stringify(response.data.user));\n                    localStorage.setItem('access_token', JSON.stringify(response.data.access_token));\n                    localStorage.setItem('refresh_token', JSON.stringify(response.data.refresh_token));\n                }\n\n                return response.data;\n            });\n    }\n}\n\nexport default new AuthService();\n"]}]}